---
title: 使用客户细分生成器创建客户细分
description: 创建客户细分，以便根据各种属性为客户分组。
ms.date: 10/18/2021
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: how-to
author: JimsonChalissery
ms.author: jimsonc
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: bd01edfe7d63d6c7712a808224171f1bb8ad8a2b
ms.sourcegitcommit: 31985755c7c973fb1eb540c52fd1451731d2bed2
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/22/2021
ms.locfileid: "7673539"
---
# <a name="create-segments"></a>创建客户细分

围绕着统一客户实体及其相关实体定义复杂筛选器。 每个客户细分在处理之后都会创建一组您可以导出并对其执行操作的客户记录。 在 **客户细分** 页面上管理客户细分。 可以使用客户细分生成器[创建新客户细分](#create-a-new-segment)，或从此应用其他区域[创建快速客户细分](#quick-segments)。 

> [!TIP]
> - 快速客户细分仅在 **个人客户** 环境中受支持。    
> - 基于 **个人客户** 的客户细分自动包含客户细分成员的可用联系信息。 在 **企业客户** 环境中，客户细分基于客户（公司或子公司）。 要在客户细分中包含联系信息，请使用客户细分生成器中的 **项目属性** 功能。
>    - 确保联系人数据源[在语义上映射到 ContactProfile](semantic-mappings.md#define-a-contactprofile-semantic-entity-mapping) 实体。

## <a name="segment-builder"></a>客户细分生成器

下图演示客户细分生成器的各个方面。 其中显示的一个客户细分将生成一组客户。 客户在特定期限内订购商品并获得奖励积分或花费一定金额。 

:::image type="content" source="media/segment-builder-overview.png" alt-text="客户细分生成器的元素。" lightbox="media/segment-builder-overview.png":::

1. 使用规则和子规则组织您的客户细分。 每个规则或子规则都由条件构成。 使用逻辑运算符组合条件

1. 选择应用于规则的实体之间的[关系路径](relationships.md)。 关系路径决定条件中可使用哪些属性。

1. 管理规则和子规则。 更改规则的位置或删除规则。

1. 使用子规则添加条件和创建适当的嵌套级别。

1. 为相连规则应用集运算。

1. 使用属性窗格添加可用实体属性或基于属性创建条件。 此窗格根据所选关系路径显示所选规则的可用实体和属性的列表。

1. 基于属性向现有规则和子规则添加条件，或向新规则添加条件。

1. 创建客户细分时撤消和恢复更改。

上面的示例显示客户细分功能。 我们为在线上至少购买了 500 美元商品 *并且* 对软件开发有兴趣的客户定义了一个客户细分。

## <a name="create-a-new-segment"></a>新建细分

创建新客户细分的方法有多种。 本部分介绍如何从头开始生成您自己的客户细分。 您还可以根据现有实体创建 *快速客户细分*，或者使用机器学习模型获取 *建议的客户细分*。 有关详细信息，请转到[客户细分概述](segments.md)。

在创建客户细分时，可以保存草稿。 在组建阶段，客户细分保存为停用客户细分。 完成客户细分配置后，运行它激活客户细分。 您还可以从 **所有客户细分** 页面 **激活** 客户细分。

1. 转到 **细分** 页。

1. 选择 **新建** > **创建自己的内容**。

1. 在客户细分生成器页上，您可以定义或编写规则。 规则由定义一组客户的一个或多个条件组成。

1. 在 **Rule1** 部分中，选择要充当客户筛选规则的实体属性。 可通过两种方法选择属性。 
   - 在 **添加到规则** 窗格中查看可用实体和属性的列表，然后选择要添加的属性旁边的 **+** 图标。 选择要将属性添加到现有规则中，还是将其用于创建新规则。
   - 在规则部分中键入属性的名称，以查看匹配的建议。

1. 选择运算符以指定条件的匹配值。 属性可以具有四种数据类型之一作为值：数值、字符串、日期或布尔值。 根据属性的数据类型，可以使用不同的运算符来指定条件。 对于使用企业客户的客户细分，可以使用两个特殊运算符来包括引入客户之间的潜在层次结构。 使用 *child of* 和 *parent of* 运算符来包含相关客户。 

1. 选择 **添加添加** 向规则添加更多条件。 若要在当前规则下创建规则，请选择 **添加子规则**。

1. 如果规则使用非 *客户* 实体 ，您必须设置关系路径。 需要关系路径才能通知系统要通过哪些关系访问统一客户实体。 选择 **设置关系路径** 将所选实体映射到统一客户实体。 如果仅有一个可能的关系路径，系统将自动选择该关系路径。 不同的关系路径可能产生不同的结果。 每个规则都可以有自己的关系路径。

   :::image type="content" source="media/relationship-path.png" alt-text="根据映射到统一客户实体的实体创建规则时的潜在关系路径。":::

   例如，屏幕截图中的 *eCommerce_eCommercePurchases* 实体有四个用于映射到 *Customer* 实体的选项： 
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > Customer
   - eCommerce_eCommercePurchases > Customer
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > Customer
   - eCommerce_eCommercePurchases > eCommerce_eCommerceContacts > POS_posPurchases > loyaltyScheme_loyCustomers > Customer 如果选择最后一个选项，可以在规则条件中加入所有列出的实体中的属性。 我们可能会获得较少的结果，因为匹配的客户记录需要成为所有实体的一部分。 在此示例中，客户必须已通过电子商务 (*eCommerce_eCommercePurchases*) 在销售点 (*POS_posPurchases*) 购买了货物，并且参加了我们的忠诚度计划 (*loyaltyScheme_loyCustomers*)。 如果选择第二个选项，则只能从 *eCommerce_eCommercePurchases* 和 *Customer* 实体选择属性。 这可能会生成更多客户配置文件。

1. 如果一个规则中包含多个条件，您可以选择连接这些条件的逻辑运算符。  
   - **AND** 运算符：必须满足所有条件才能在客户细分中包含记录。 如果要为不同实体定义条件，此选项最有用。
   - **OR** 运算符：必须满足其中一个条件才能在客户细分中包含记录。 如果要为同一个实体定义多个条件，此选项最有用。

   :::image type="content" source="media/segmentation-either-condition.png" alt-text="包含两个 AND 条件的规则。":::

   如果使用 OR 运算符，则所有条件必须基于关系路径中包含的实体。

   - 您可以创建多条规则以创建多组不同的客户记录。 您可以合并组以包括业务案例所需的客户。 若要新建规则，请选择 **添加规则**。 具体来说，如果由于指定的关系路径的缘故而无法在规则中包含实体，则必须创建新规则以从中选择属性。

      :::image type="content" source="media/segment-rule-grouping.png" alt-text="向客户细分添加新规则，然后选择 set 运算符。":::

   - 选择一个设置的运算符：**并集**、**交集** 或 **排除**。

      - **联合** 用于联合两个组。
      - **相交** 用于重叠两个组。 只有这两个组所 *共有* 的数据才会保留在统一组中。
      - **除外** 用于合并两个组。 只保留组 A 中有但在组 B 中 *不常见* 的数据。

1. 默认情况下，细分市场会生成包含与所定义筛选器匹配的客户配置文件所有属性的输出实体。 如果细分市场基于 *客户* 实体以外的其他实体，则可以将这些实体中的更多属性添加到输出实体中。 选择 **项目属性** 以选择将附加到输出实体的属性。 

   > [!IMPORTANT]
   > 对于基于企业客户的客户细分，*ContactProfile* 实体中每个客户的一个或多个联系人的详细信息需要包含在客户细分中，以允许该客户细分被激活或导出到需要联系信息的目标。 有关 *ContactProfile* 实体有关详细信息，请参阅[语义映射](semantic-mappings.md)。
   > 基于具有预计联系人属性的业务客户的客户细分示例输出如下所示： 
   >
   > |ID  |客户名称  |收入  |联系人姓名  | 联系人角色|
   > |---------|---------|---------|---------|---|
   > |10021     | Contoso | 100K | [Abbie Moss、Ruth Soto]  | [CEO、采购经理]

   :::image type="content" source="media/segments-project-attributes.png" alt-text="侧窗格中选择了要添加到输出实体的预测属性的示例。":::
  
   例如：客户细分基于包含与 *Customer* 实体相关的购买数据的实体。 此客户细分查找今年购买了商品的所有西班牙客户。 可以选择向输出实体中的所有匹配的客户记录追加商品价格或购买日期之类属性。 若要分析季节与总支出之间的关系，此信息可能非常有用。

   > [!NOTE]
   > - **项目属性** 仅适用于与 customer 实体具有一对多关系的实体。 例如，一个客户可以具有多个订阅。
   > - 如果您要投射的属性与关系定义的 *Customer* 实体相距不止一个跃点，则应在您正在构建的客户细分查询的每个规则中使用该属性。 
   > - 如果您要投射的属性距离 *Customer* 实体仅一个跃点，该属性则不需要出现在您正在构建的客户细分查询的每个规则中。 
   > - 在使用设置的运算符时，会将 **预测属性** 考虑在内。

1. 保存并运行客户细分之前，请选择客户细分名称旁边的 **编辑详细信息**。 为客户细分提供名称，然后更新为客户细分建议的 **输出实体名称**。 您还可以向客户细分添加说明。

1. 选择 **运行** 保存客户细分，激活它，然后根据所有规则和条件开始处理客户细分。 否则，它将被保存为停用客户细分。
   
1. 选择 **返回到客户细分** 以返回到 **客户细分** 页。

1. 默认情况下，该客户细分被创建为动态客户细分。 这意味着在系统刷新期间将刷新该客户细分。 若要 [停止自动刷新](segments.md#manage-existing-segments)，请选择客户细分，然后选择 **设为静态** 选项。 可以随时[手动刷新](segments.md#refresh-segments)静态客户细分。

> [!TIP]
> - 在为条件设置运算符时，客户细分生成器不会建议实体中的有效值。 您可以转到 **数据** > **实体**，然后下载实体数据以查看哪些值可用。
> - 基于日期的条件让您可以在固定日期与浮动日期范围之间切换。
> - 如果您的客户细分有多个规则，您正在编辑的规则旁边会显示一条垂直的蓝线。 
> - 可以将规则和条件移动到客户细分定义中的其他位置。 选择规则或条件旁边的 [...]，然后选择其移动方法和目标位置。
> - 命令栏中的 **撤消** 和 **恢复** 控件可让您回滚更改。

## <a name="quick-segments"></a>快速细分

通过快速客户细分，您可以利用单个运算符快速构建简单的客户细分，以便更快地获取见解。

1. 在 **客户细分** 页上，选择 **新建** > **创建自**。
   - 若要生成基于 *统一的客户* 实体的细分，请选择 **配置文件** 选项。
   - 选择 **度量** 选项，以围绕先前创建的度量构建客户细分。
   - 选择 **智能** 以根据您使用 **预测** 或 **自定义模型** 功能生成的一个输出实体构建细分。

2. 在 **新快速客户细分** 对话框中，从 **字段** 下拉列表选择属性。

3. 系统将提供更多见解来帮助您创建更出色的客户细分。
   - 对于分类字段，我们将显示排名最靠前的 10 类客户的计数。 选择一个 **值**，然后选择 **查看**。
   - 对于数值属性，系统将显示哪个属性值归入每个客户的百分比下。 选择 **运算符** 和 **值**，然后选择 **查看**。

4. 系统将为您提供 **估算的细分大小**。 可以选择要生成已定义的细分，还是先再次访问该细分以获取不同的细分大小。

    > [!div class="mx-imgBorder"]
    > ![快速客户细分的名称和估算。](media/quick-segment-name.png "快速细分的名称和估算")

5. 为细分提供 **名称**。 （可选）提供 **显示名称**。

6. 选择 **保存** 以创建细分。

7. 处理完细分之后，可以就像创建的其他细分一样查看该细分。

## <a name="next-steps"></a>后续步骤

[导出客户细分](export-destinations.md)和浏览 [Customer Card 集成](customer-card-add-in.md)，以便在其他应用程序中使用客户细分。

[!INCLUDE[footer-include](../includes/footer-banner.md)]
